<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>你要下班了！</title>
<link rel="stylesheet" type="text/css" href="./static/css/bootstrap.min.css" />
<style type="text/css">
	#clock {
		font: bold 24pt sans;
		background-color: #f5f5f5;
		padding: 10px 15px;
		border: 1px solid #ccc;
		border-radius: 5px;
	}
	#todaydatetime {
		font: bold 24pt sans;
		background-color: #f5f5f5;
		padding: 10px 15px;
		border: 1px solid #ccc;
		border-radius: 5px;
	}
	.demo {
		margin:0,auto;
	}
	div.example{
		width:8%;
		margin:0 auto;
		padding:5px;
		border:1px solid #d4d4d4;
	}
</style>

</head>
<body>
	<div class="container">
		<div class="row">
			<div class="demo col-sm-12">
				<center>
					<h1 class=" alert alert-success">又是忙碌的一天，请按时下班~</h1>
				</center>

				<center>
					<div class=" alert alert-success">
						<span id="todaydatetime"></span>
					</div>
					<div class=" alert alert-danger">
						<span id="clock"></span>
					</div>
				</center>
			</div>
			<div >
				<script>
					var H='....';
					var H=H.split('');
					var M='.....';
					var M=M.split('');
					var S='......';
					var S=S.split('');
					var Ypos=0;
					var Xpos=0;
					var Ybase=8;
					var Xbase=8;
					var dots=12;

					function clock(){
					var time=new Date ();
					var secs=time.getSeconds();
					var sec=-1.57 + Math.PI * secs/30;
					var mins=time.getMinutes();
					var min=-1.57 + Math.PI * mins/30;
					var hr=time.getHours();
					var hrs=-1.57 + Math.PI * hr/6 + Math.PI*parseInt(time.getMinutes())/360;
					
					setTimeout('clock()',50);
					}
					window.onload=clock;
				</script>

				<script>
					var hourtime="18:00:00";
					var weeks = new Array("周日", "周一", "周二", "周三", "周四", "周五", "周六");
					var holidays2021 = {
						"劳动节": [get_time("2021/05/01 00:00:00"), get_time("2021/05/05 23:59:59")],
						"端午节": [get_time("2021/06/12 00:00:00"), get_time("2021/06/14 23:59:59")],
						"中秋节": [get_time("2021/09/19 00:00:00"), get_time("2021/09/21 23:59:59")],
						"国庆节": [get_time("2021/10/01 00:00:00"), get_time("2021/10/07 23:59:59")],
					};
					var holiday = null;

					function get_time(a) {
						return new Date(a).getTime() / 1000; 
					}

					function displayTime() {
						var elt = document.getElementById("clock");
						var elt2 = document.getElementById("todaydatetime");
						if(leftTime < 0) {
							elt.innerHTML = "Over";
						} else {
							var endTime =new Date(new Date().toLocaleDateString()+" "+hourtime);
							var now = new Date();
							
							var day = now.getDay();
							var nowTimestamp = new Date().getTime() / 1000;
							for(var key in holidays2021){
								if (nowTimestamp > holidays2021[key][0] && nowTimestamp < holidays2021[key][1]) {
									holiday = key;
								}
							}

							var nowYear=now.getFullYear();
							var nowMonth=now.getMonth()+1;
							var nowDay=now.getDate();

							var leftTime = endTime.getTime() - now.getTime();
							var ms = parseInt(leftTime % 1000).toString();
							leftTime = parseInt(leftTime / 1000);
							var o = Math.floor(leftTime / 3600);
							var d = Math.floor(o / 24);
							var m = Math.floor(leftTime / 60 % 60);
							var s = leftTime % 60;

							elt2.innerHTML = nowYear + " 年 " + nowMonth + " 月 " + nowDay + " 日 ";
							if (holiday != null){
								elt.innerHTML = "不是吧阿Sir？" + holiday + "还上班？";
							} else if ( day == 6 || day == 0){
								elt.innerHTML = "不是吧阿Sir？" + weeks[day] + "还上班？";
							} else if ((o<0&&m<0&&s<0)){
								elt.innerHTML = "你已经下班了，为什么还不回家？";
							} else {
								elt.innerHTML =o + "小时:" + m + "分:" + s + "秒:" + ms.charAt(0);
							}
							setTimeout(displayTime, 100);
						}
					}
					displayTime();
				</script>
			</div>
		</div>
	</div>
	
</body>
</html>
